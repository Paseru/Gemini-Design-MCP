# Projet : `gemini-design-mcp-website`

---

**## Utilisation de Convex pour tout le backend**

- ***IMPORTANT : Toute la logique backend de cette application doit être implémentée dans Convex.****
- Toutes les opérations de lecture, d’écriture, de validation, d’authentification et d’autorisation doivent passer par des functions Convex (queries, mutations, actions) dans le dossier `/convex`.
- Il ne faut pas utiliser d’API routes Next.js ou d’autres serveurs backend pour la logique métier ou l’accès à la base de données.
- Le frontend (Next.js, React, etc.) doit appeler les functions Convex via le client Convex.
- Convex gère la sécurité, la cohérence des données, les transactions et la réactivité temps réel.
- ***Résumé : Convex est le backend unique de cette application.****

Pour plus d’informations, voir la documentation officielle :

- [Convex Overview](https://docs.convex.dev/understanding#server-functions)

---

# MCP context7 - Quand l'utiliser

- Tu as un doute sur une bibliothèque/API récente ou peu connue
- Tu as besoin d'exemples concrets d'implémentation
- Tu cherches des solutions à une erreur spécifique
- Tu veux vérifier les meilleures pratiques actuelles (post-janvier 2025)


---

# MCP EXA

- Le MCP exa, c'est ton browser. A chaque fois que tu veux faire une recherche en ligne, tu l'utilises. Quand tu n'es pas sûr d'un truc ou bien tu veux faire une recherche en ligne, tu utilises ce MCP.

---

# mgrep - Ton assistant de recherche de code

**mgrep est ton outil principal pour explorer le codebase.** Il te donne la réponse en langage naturel + la source pertinente, tout servi.

## Commande de base

```bash
mgrep "ta question en langage naturel" --store "nom-projet" -a -m <nombre>
```

Ici le store est "gemini-mcp-website"

## Paramètres essentiels

| Paramètre | Description |
|-----------|-------------|
| `--store "nom-projet"` | **Obligatoire** - le store indexé du projet |
| `-a` | Active la réponse en langage naturel |
| `-m <n>` | Nombre de résultats du retrieval (minimum 10) |

## Ajuster `-m` selon la complexité

| Type de requête | `-m` recommandé |
|-----------------|-----------------|
| Question simple (1-2 fichiers) | 10 |
| Question moyenne (flow, feature) | 20-30 |
| Question complexe (debug, architecture) | 30-50 |

## Stratégie pour requêtes complexes

Si la requête touche **plusieurs parties du codebase**, lance plusieurs mgrep en parallèle plutôt qu'une seule requête surchargée :

```bash
# Exemple : comprendre le système d'auth complet
mgrep "comment fonctionne l'authentification LinkedIn côté frontend" --store "nom-projet" -a -m <n>
mgrep "comment le token LinkedIn est géré côté Convex" --store "nom-projet" -a -m <n>
mgrep "comment le background script gère les sessions" --store "nom-projet" -a -m <n>
```

## Workflow efficace (IMPORTANT)

**mgrep = trouver les sources (1-2 appels MAX), puis Read = naviguer**

1. **Un seul mgrep** pour identifier les fichiers et lignes pertinents
2. **Dès que tu as les numéros de ligne**, utilise `Read` directement pour explorer le code
3. **Ne refais PAS de mgrep** si tu as déjà les sources du premier appel

### ❌ Ce qu'il ne faut PAS faire
```
mgrep "où est le bouton X" → résultat: fichier.tsx:150-170
mgrep "montre-moi le code du bouton X" → INUTILE, tu as déjà la ligne !
mgrep "comment le bouton X est stylisé" → INUTILE, fais juste Read !
```

### ✅ Ce qu'il faut faire
```
mgrep "où est le bouton X et ses styles" → résultat: fichier.tsx:150-170
Read fichier.tsx lignes 150-170 → tu comprends le code toi-même
```

**Règle d'or** : mgrep te donne les lignes, c'est à toi de lire et comprendre ensuite. Ne traite pas mgrep comme un oracle qui doit tout expliquer.

## Règles

- **OBLIGATOIRE** : Utilise mgrep pour TOUTE recherche de code. N'utilise JAMAIS grep, Grep tool, ou Glob pour chercher du code.
- **Langage naturel** : mgrep est un agent IA comme toi. Parle-lui comme à un collègue, pas comme à un moteur de recherche.
  - ❌ `"architecture block icon color complete status"` (mots-clés robotiques)
  - ✅ `"Quelle est la couleur de l'icône des blocs d'architecture quand ils sont complétés ?"` (question naturelle)

---

# Subagents (Task tool)

**Les subagents n'héritent PAS des instructions de ce fichier.**

Quand tu lances un subagent Explore, copie-colle les instructions sur mgrep de ce CLAUDE.md dans le prompt du subagent.

---

# MCP Gemini Design

**Gemini is your frontend developer.** For all UI/design work, use this MCP.

## Before writing any UI code, ask yourself:

- Is it a NEW visual component (popup, card, section, etc.)? → `snippet_frontend` or `create_frontend`
- Is it a REDESIGN of an existing element? → `modify_frontend`
- Is it just text/logic, or a trivial change? → Do it yourself

## Critical rules:

1. **If UI already exists** (whether you coded it manually OR Gemini generated it) **and you need to redesign/restyle it** → use `modify_frontend`, NOT snippet_frontend.

2. **ALWAYS use `writeFile: true`** to write directly to the file. NEVER retrieve the code and then do a manual Edit.

3. **Tasks can be mixed** (logic + UI). Mentally separate them. Do the logic yourself, delegate the UI to Gemini.